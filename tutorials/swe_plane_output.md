---
layout: page
title: SWE Plane Output files
permalink: tutorials/swe_plane_output_files.html
---


This tutorial describes the output files generated by the shallow-water equations on the plane

* We start by loading the SWEET environment:
```
$ . ./local/env_vars.sh
```

* Remove existing binaries
```
$ make clean
```

* Compile swe_plane program for the shallow-water equations on the plane
```
$ scons --program=swe_plane
```

* Execute program with the following parameters:
```
$ ./build/swe_plane_*_release --timestepping-method=l_erk --timestepping-order=4 --dt=0.005 -t 5 -M 128 --benchmark-name=gaussian_bump -f 1 -g 1 -H 1 -o 0.1 -v 2
```
Here, the meaning of the parameters is as follows:
	* ```--timestepping-method=l_erk --timestepping-order=4 --dt=0.005```

		Runge-Kutta order 4 time stepping method for linear parts of shallow-water equations and time step size of 0.01

		```l_erk``` Chooses to use only linear parts of the shallow-water equations

	* ```-t 5```

		Run for 5 simulation seconds

	* ```-M 128```

		Spectral resolution of 128

	* ```--benchmark-name=gaussian_bump```

		Choose gaussian bump benchmark

	* ```-f 1 -g 1 -H 1```

		Unit Coriolis, gravity and average height

	* ```-o 0.1```

		Do output every 0.1 simulation seconds

	* ```-v 2```

		Be a little bit more verbose


* Output files

	* This generates a bunch of .csv output files which are plain text files:

		* ```output_diag_div_*.csv```

			Diagnostic divergence field

		* ```output_diag_ke_*.csv```

			Diagnostic kinetic energy field

		* ```output_diag_vort_*.csv```

			Diagnostic vorticity field

		* ```output_prog_h_pert_*.csv```

			Prognostic perturbation of height field

		* ```output_prog_u_*.csv```

			Prognostic velocity in x direction

		* ```output_prog_v_*.csv```

			Prognostic velocity in y direction

	* We can also render the field using plotting scripts:

		```
		./scripts/pp_plot_plane_csv.py output_prog_h_pert_t0000000000*csv
		```

		This will generate *.png files

	* Finally, we can also generate a video:

		```
		./scripts/pp_create_mp4.sh output_prog_h_pert output_prog_h_pert.mp4
		```

		which generates a video file in ```output_prog_h_pert.mp4```.

* Error analysis:

	If we are interested in the errors in the time stepping methods, we have two options:

	* Comparing the output files with a reference solution:
	
		We can generate reference solutions using e.g. the time stepping method ```l_direct``` which can compute an analytical reference solution

	* Compute the errors on the fly:

		For the SWE on the plane, the analytical solution can be computed directly (this is also what's used in ```l_direct```).
		We can activate this using the program option

		```--compute-errors=1```

		Since we don't need the outputfiles anymore, we can deactivate them using

		```-O -```

		which sets the output filename to ```-``` which means that no output files should be generated.

		Executing SWEET with these options then prints out the errors on different fields of the shallow water equations in a tabular format.
